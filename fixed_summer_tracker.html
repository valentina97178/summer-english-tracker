<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æš‘æœŸè‹±æ–‡è¤‡ç¿’äº’å‹•å¼é€²åº¦è¡¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .header h1 {
            color: #4c51bf;
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background: #4c51bf;
            color: white;
        }
        
        .btn-primary:hover {
            background: #3730a3;
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background: #e2e8f0;
            color: #4a5568;
        }
        
        .btn-secondary:hover {
            background: #cbd5e0;
        }
        
        .btn-danger {
            background: #e53e3e;
            color: white;
        }
        
        .btn-danger:hover {
            background: #c53030;
        }
        
        .btn-success {
            background: #38a169;
            color: white;
        }
        
        .btn-success:hover {
            background: #2f855a;
        }
        
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: #f7fafc;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            border-left: 4px solid #4c51bf;
        }
        
        .stat-number {
            font-size: 2em;
            font-weight: bold;
            color: #4c51bf;
        }
        
        .stat-label {
            color: #718096;
            font-size: 0.9em;
        }
        
        .week-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 30px;
            justify-content: center;
        }
        
        .week-tab {
            padding: 12px 20px;
            border: none;
            border-radius: 10px;
            background: #e2e8f0;
            color: #4a5568;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 500;
        }
        
        .week-tab.active {
            background: #4c51bf;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(76, 81, 191, 0.3);
        }
        
        .week-content {
            display: none;
        }
        
        .week-content.active {
            display: block;
        }
        
        .class-info {
            background: #f0fff4;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #38a169;
        }
        
        .tasks {
            background: #fffaf0;
            padding: 20px;
            border-radius: 10px;
            border-left: 4px solid #ed8936;
        }
        
        .task-item {
            display: flex;
            align-items: center;
            padding: 15px;
            margin: 10px 0;
            background: white;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid #e2e8f0;
        }
        
        .task-item:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .task-item.completed {
            background: #f0fff4;
            border-color: #38a169;
            opacity: 0.8;
        }
        
        .task-item.completed .task-text {
            text-decoration: line-through;
            color: #38a169;
        }
        
        .custom-task {
            border-left: 3px solid #805ad5;
        }
        
        .custom-task .task-text {
            font-style: italic;
        }
        
        .checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid #cbd5e0;
            border-radius: 50%;
            margin-right: 15px;
            position: relative;
            transition: all 0.3s;
        }
        
        .task-item.completed .checkbox {
            background: #38a169;
            border-color: #38a169;
        }
        
        .task-item.completed .checkbox::after {
            content: 'âœ“';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: white;
            font-weight: bold;
        }
        
        .task-icon {
            font-size: 1.5em;
            margin-right: 10px;
        }
        
        .task-text {
            font-weight: 500;
            color: #2d3748;
        }
        
        .progress-bar {
            background: #e2e8f0;
            height: 10px;
            border-radius: 5px;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4c51bf, #667eea);
            transition: width 0.5s ease;
        }
        
        .tips {
            background: #ebf8ff;
            padding: 20px;
            border-radius: 10px;
            margin-top: 30px;
            border-left: 4px solid #3182ce;
        }
        
        .help-section {
            background: #f7fafc;
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 4px solid #805ad5;
        }
        
        .celebration {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
            border-radius: 15px;
            margin: 20px 0;
            display: none;
        }
        
        .celebration.show {
            display: block;
            animation: bounce 0.6s ease;
        }
        
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }
        
        .modal-content {
            background-color: white;
            margin: 10% auto;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
            text-align: center;
        }
        
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        
        .close:hover {
            color: #000;
        }
        
        @keyframes bounce {
            0%, 20%, 53%, 80%, 100% { transform: translate3d(0,0,0); }
            40%, 43% { transform: translate3d(0,-30px,0); }
            70% { transform: translate3d(0,-15px,0); }
            90% { transform: translate3d(0,-4px,0); }
        }
        
        @media print {
            .action-buttons, .btn {
                display: none !important;
            }
            
            .container {
                box-shadow: none;
                margin: 0;
                padding: 20px;
            }
            
            body {
                background: white;
                padding: 0;
            }
        }
        
        .print-info {
            display: none;
            text-align: center;
            margin: 20px 0;
            padding: 15px;
            background: #f0f8ff;
            border-radius: 10px;
        }
        
        @media print {
            .print-info {
                display: block;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ“š æš‘æœŸè‹±æ–‡è¤‡ç¿’äº’å‹•å¼é€²åº¦è¡¨</h1>
            <p>è¿½è¹¤ä½ çš„å­¸ç¿’é€²åº¦ï¼Œé”æˆæ¯é€±ç›®æ¨™ï¼</p>
        </div>

        <div class="action-buttons">
            <button type="button" class="btn btn-primary" id="saveProgressBtn">
                ğŸ’¾ ä¿å­˜é€²åº¦
            </button>
            <button type="button" class="btn btn-success" id="exportOptionsBtn">
                ğŸ“„ åŒ¯å‡ºé€²åº¦
            </button>
            <button type="button" class="btn btn-secondary" onclick="window.print()">
                ğŸ–¨ï¸ åˆ—å°
            </button>
            <button type="button" class="btn btn-danger" id="resetBtn">
                ğŸ”„ é‡ç½®é€²åº¦
            </button>
            <button type="button" class="btn btn-secondary" id="helpBtn">
                â“ ä½¿ç”¨èªªæ˜
            </button>
            <button type="button" class="btn btn-primary" id="taskManagerBtn">
                âš™ï¸ ä»»å‹™ç®¡ç†
            </button>
        </div>

        <div class="print-info">
            <h3>ğŸ“Š å­¸ç¿’é€²åº¦è¨˜éŒ„è¡¨</h3>
            <p>åˆ—å°æ™‚é–“ï¼š<span id="print-date"></span></p>
            <p>ç¸½å®Œæˆåº¦ï¼š<span id="print-total-progress">0%</span></p>
        </div>

        <div class="stats">
            <div class="stat-card">
                <div class="stat-number" id="totalProgress">0%</div>
                <div class="stat-label">ç¸½é€²åº¦</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="vocabProgress">0%</div>
                <div class="stat-label">å–®å­—</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="translationProgress">0%</div>
                <div class="stat-label">ç¿»è­¯</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="clozeProgress">0%</div>
                <div class="stat-label">å…‹æ¼å­—</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="readingProgress">0%</div>
                <div class="stat-label">é–±è®€</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="essayProgress">0%</div>
                <div class="stat-label">ä½œæ–‡</div>
            </div>
            <div class="stat-card">
                <div class="stat-number" id="b5Progress">0%</div>
                <div class="stat-label">B5èª²æ–‡</div>
            </div>
        </div>

        <div class="week-tabs">
            <button type="button" class="week-tab active" data-week="1">ç¬¬1é€± (7/6)</button>
            <button type="button" class="week-tab" data-week="2">ç¬¬2é€± (7/13)</button>
            <button type="button" class="week-tab" data-week="3">ç¬¬3é€± (7/20)</button>
            <button type="button" class="week-tab" data-week="4">ç¬¬4é€± (7/27)</button>
            <button type="button" class="week-tab" data-week="5">ç¬¬5é€± (8/3)</button>
            <button type="button" class="week-tab" data-week="6">ç¬¬6é€± (8/10)</button>
            <button type="button" class="week-tab" data-week="7">ç¬¬7é€± (8/17)</button>
            <button type="button" class="week-tab" data-week="8">ç¬¬8é€± (8/24)</button>
        </div>

        <!-- Week 1 Content -->
        <div class="week-content active" id="week1">
            <div class="class-info">
                <h3>ğŸ“… ç¬¬1é€±èª²å ‚å…§å®¹ (7/6)</h3>
                <p><strong>å‰15åˆ†é˜ï¼š</strong>ğŸ“Š èª²å ‚æ¸¬é©— <input type="number" id="test1" placeholder="åˆ†æ•¸" style="width:60px; margin-left:10px; padding:2px; border:1px solid #ccc; border-radius:4px;"></p>
                <p><strong>æ¥ä¸‹ä¾†30åˆ†é˜ï¼š</strong>ğŸ“– Lesson 1 èª²æ–‡é‡é»è¬›è§£</p>
                <p><strong>å‰©é¤˜æ™‚é–“ï¼š</strong>ğŸ” éŒ¯é¡Œè¬›è§£</p>
                <p><strong>æœ€å¾Œ30åˆ†é˜ï¼š</strong>âœ’ï¸ åœ–ç‰‡é¡Œä½œæ–‡è¬›è§£</p>
            </div>
            <div class="tasks">
                <h3>âœ… ç¬¬1é€±å­¸ç¿’ä»»å‹™</h3>
                <div class="task-item" data-task-id="vocab_1_5" data-category="vocab">
                    <div class="checkbox"></div>
                    <span class="task-icon">ğŸ“š</span>
                    <span class="task-text">å–®å­—ç¬¬1ï½5å›è¨˜æ†¶</span>
                </div>
                <div class="task-item" data-task-id="translation_1_2" data-category="translation">
                    <div class="checkbox"></div>
                    <span class="task-icon">âœï¸</span>
                    <span class="task-text">å¥å‹ç¿»è­¯è¬›ç¾©ç¬¬1-2å›</span>
                </div>
                <div class="task-item" data-task-id="cloze_1_5" data-category="cloze">
                    <div class="checkbox"></div>
                    <span class="task-icon">ğŸ“</span>
                    <span class="task-text">å…‹æ¼å­—ç¬¬1ï½5å›</span>
                </div>
                <div class="task-item" data-task-id="reading_1_5" data-category="reading">
                    <div class="checkbox"></div>
                    <span class="task-icon">ğŸ“–</span>
                    <span class="task-text">é–±è®€æ¸¬é©—ç¬¬1ï½5å›</span>
                </div>
                <div class="task-item" data-task-id="essay_1" data-category="essay">
                    <div class="checkbox"></div>
                    <span class="task-icon">âœ’ï¸</span>
                    <span class="task-text">ä½œæ–‡ç¬¬1ç¯‡ï¼ˆåœ–ç‰‡é¡Œï¼‰</span>
                </div>
                <div class="task-item" data-task-id="b5_1" data-category="b5">
                    <div class="checkbox"></div>
                    <span class="task-icon">ğŸ“˜</span>
                    <span class="task-text">B5èª²æ–‡ç¬¬1å›</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="week1Progress" style="width: 0%"></div>
                </div>
                <p>æœ¬é€±å®Œæˆåº¦: <span id="week1Percent">0%</span></p>
            </div>
            <div class="celebration" id="celebration1">
                <h2>ğŸ‰ æ­å–œå®Œæˆç¬¬1é€±ä»»å‹™ï¼</h2>
                <p>Lesson 1 å­¸ç¿’å®Œæˆï¼ç¹¼çºŒä¿æŒï¼</p>
            </div>
        </div>

        <!-- Week 2 Content -->
        <div class="week-content" id="week2">
            <div class="class-info">
                <h3>ğŸ“… ç¬¬2é€±èª²å ‚å…§å®¹ (7/13)</h3>
                <p><strong>å‰15åˆ†é˜ï¼š</strong>ğŸ“Š èª²å ‚æ¸¬é©— <input type="number" id="test2" placeholder="åˆ†æ•¸" style="width:60px; margin-left:10px; padding:2px; border:1px solid #ccc; border-radius:4px;"></p>
                <p><strong>æ¥ä¸‹ä¾†30åˆ†é˜ï¼š</strong>ğŸ“– Lesson 2 èª²æ–‡é‡é»è¬›è§£</p>
                <p><strong>å‰©é¤˜æ™‚é–“ï¼š</strong>ğŸ” éŒ¯é¡Œè¬›è§£</p>
                <p><strong>æœ€å¾Œ30åˆ†é˜ï¼š</strong>âœ’ï¸ åœ–ç‰‡é¡Œä½œæ–‡è¬›è§£</p>
            </div>
            <div class="tasks">
                <h3>âœ… ç¬¬2é€±å­¸ç¿’ä»»å‹™</h3>
                <div class="task-item" data-task-id="vocab_6_10" data-category="vocab">
                    <div class="checkbox"></div>
                    <span class="task-icon">ğŸ“š</span>
                    <span class="task-text">å–®å­—ç¬¬6ï½10å›è¨˜æ†¶</span>
                </div>
                <div class="task-item" data-task-id="translation_3_4" data-category="translation">
                    <div class="checkbox"></div>
                    <span class="task-icon">âœï¸</span>
                    <span class="task-text">å¥å‹ç¿»è­¯è¬›ç¾©ç¬¬3-4å›</span>
                </div>
                <div class="task-item" data-task-id="cloze_6_10" data-category="cloze">
                    <div class="checkbox"></div>
                    <span class="task-icon">ğŸ“</span>
                    <span class="task-text">å…‹æ¼å­—ç¬¬6ï½10å›</span>
                </div>
                <div class="task-item" data-task-id="reading_6_10" data-category="reading">
                    <div class="checkbox"></div>
                    <span class="task-icon">ğŸ“–</span>
                    <span class="task-text">é–±è®€æ¸¬é©—ç¬¬6ï½10å›</span>
                </div>
                <div class="task-item" data-task-id="essay_2" data-category="essay">
                    <div class="checkbox"></div>
                    <span class="task-icon">âœ’ï¸</span>
                    <span class="task-text">ä½œæ–‡ç¬¬2ç¯‡ï¼ˆåœ–ç‰‡é¡Œï¼‰</span>
                </div>
                <div class="task-item" data-task-id="b5_2" data-category="b5">
                    <div class="checkbox"></div>
                    <span class="task-icon">ğŸ“˜</span>
                    <span class="task-text">B5èª²æ–‡ç¬¬2å›</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="week2Progress" style="width: 0%"></div>
                </div>
                <p>æœ¬é€±å®Œæˆåº¦: <span id="week2Percent">0%</span></p>
            </div>
            <div class="celebration" id="celebration2">
                <h2>ğŸ‰ æ­å–œå®Œæˆç¬¬2é€±ä»»å‹™ï¼</h2>
                <p>Lesson 2 å­¸ç¿’å®Œæˆï¼æŒçºŒé€²æ­¥ä¸­ï¼</p>
            </div>
        </div>

        <!-- Week 3 Content -->
        <div class="week-content" id="week3">
            <div class="class-info">
                <h3>ğŸ“… ç¬¬3é€±èª²å ‚å…§å®¹ (7/20)</h3>
                <p><strong>å‰15åˆ†é˜ï¼š</strong>ğŸ“Š èª²å ‚æ¸¬é©— <input type="number" id="test3" placeholder="åˆ†æ•¸" style="width:60px; margin-left:10px; padding:2px; border:1px solid #ccc; border-radius:4px;"></p>
                <p><strong>æ¥ä¸‹ä¾†30åˆ†é˜ï¼š</strong>ğŸ“– Lesson 3 èª²æ–‡é‡é»è¬›è§£</p>
                <p><strong>å‰©é¤˜æ™‚é–“ï¼š</strong>ğŸ” éŒ¯é¡Œè¬›è§£</p>
                <p><strong>æœ€å¾Œ30åˆ†é˜ï¼š</strong>âœ’ï¸ åœ–ç‰‡é¡Œä½œæ–‡è¬›è§£</p>
            </div>
            <div class="tasks">
                <h3>âœ… ç¬¬3é€±å­¸ç¿’ä»»å‹™</h3>
                <div class="task-item" data-task-id="vocab_11_15" data-category="vocab">
                    <div class="checkbox"></div>
                    <span class="task-icon">ğŸ“š</span>
                    <span class="task-text">å–®å­—ç¬¬11ï½15å›è¨˜æ†¶</span>
                </div>
                <div class="task-item" data-task-id="translation_5_6" data-category="translation">
                    <div class="checkbox"></div>
                    <span class="task-icon">âœï¸</span>
                    <span class="task-text">å¥å‹ç¿»è­¯è¬›ç¾©ç¬¬5-6å›</span>
                </div>
                <div class="task-item" data-task-id="cloze_11_15" data-category="cloze">
                    <div class="checkbox"></div>
                    <span class="task-icon">ğŸ“</span>
                    <span class="task-text">å…‹æ¼å­—ç¬¬11ï½15å›</span>
                </div>
                <div class="task-item" data-task-id="reading_11_15" data-category="reading">
                    <div class="checkbox"></div>
                    <span class="task-icon">ğŸ“–</span>
                    <span class="task-text">é–±è®€æ¸¬é©—ç¬¬11ï½15å›</span>
                </div>
                <div class="task-item" data-task-id="essay_3" data-category="essay">
                    <div class="checkbox"></div>
                    <span class="task-icon">âœ’ï¸</span>
                    <span class="task-text">ä½œæ–‡ç¬¬3ç¯‡ï¼ˆåœ–ç‰‡é¡Œï¼‰</span>
                </div>
                <div class="task-item" data-task-id="b5_3" data-category="b5">
                    <div class="checkbox"></div>
                    <span class="task-icon">ğŸ“˜</span>
                    <span class="task-text">B5èª²æ–‡ç¬¬3å›</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="week3Progress" style="width: 0%"></div>
                </div>
                <p>æœ¬é€±å®Œæˆåº¦: <span id="week3Percent">0%</span></p>
            </div>
            <div class="celebration" id="celebration3">
                <h2>ğŸ‰ æ­å–œå®Œæˆç¬¬3é€±ä»»å‹™ï¼</h2>
                <p>Lesson 3 å­¸ç¿’å®Œæˆï¼å­¸ç¿’ç¯€å¥å¾ˆç©©å®šï¼</p>
            </div>
        </div>

        <!-- Week 4 Content -->
        <div class="week-content" id="week4">
            <div class="class-info">
                <h3>ğŸ“… ç¬¬4é€±èª²å ‚å…§å®¹ (7/27)</h3>
                <p><strong>å‰15åˆ†é˜ï¼š</strong>ğŸ“Š èª²å ‚æ¸¬é©— <input type="number" id="test4" placeholder="åˆ†æ•¸" style="width:60px; margin-left:10px; padding:2px; border:1px solid #ccc; border-radius:4px;"></p>
                <p><strong>æ¥ä¸‹ä¾†30åˆ†é˜ï¼š</strong>ğŸ“– Lesson 4 èª²æ–‡é‡é»è¬›è§£</p>
                <p><strong>å‰©é¤˜æ™‚é–“ï¼š</strong>ğŸ” éŒ¯é¡Œè¬›è§£</p>
                <p><strong>æœ€å¾Œ30åˆ†é˜ï¼š</strong>âœ’ï¸ è«–èªªæ–‡ä½œæ–‡è¬›è§£</p>
            </div>
            <div class="tasks">
                <h3>âœ… ç¬¬4é€±å­¸ç¿’ä»»å‹™</h3>
                <div class="task-item" data-task-id="vocab_16_20" data-category="vocab">
                    <div class="checkbox"></div>
                    <span class="task-icon">ğŸ“š</span>
                    <span class="task-text">å–®å­—ç¬¬16ï½20å›è¨˜æ†¶</span>
                </div>
                <div class="task-item" data-task-id="translation_7_8" data-category="translation">
                    <div class="checkbox"></div>
                    <span class="task-icon">âœï¸</span>
                    <span class="task-text">å¥å‹ç¿»è­¯è¬›ç¾©ç¬¬7-8å›</span>
                </div>
                <div class="task-item" data-task-id="cloze_16_20" data-category="cloze">
                    <div class="checkbox"></div>
                    <span class="task-icon">ğŸ“</span>
                    <span class="task-text">å…‹æ¼å­—ç¬¬16ï½20å›</span>
                </div>
                <div class="task-item" data-task-id="reading_16_20" data-category="reading">
                    <div class="checkbox"></div>
                    <span class="task-icon">ğŸ“–</span>
                    <span class="task-text">é–±è®€æ¸¬é©—ç¬¬16ï½20å›</span>
                </div>
                <div class="task-item" data-task-id="essay_4" data-category="essay">
                    <div class="checkbox"></div>
                    <span class="task-icon">âœ’ï¸</span>
                    <span class="task-text">ä½œæ–‡ç¬¬4ç¯‡ï¼ˆè«–èªªæ–‡ï¼‰</span>
                </div>
                <div class="task-item" data-task-id="b5_4" data-category="b5">
                    <div class="checkbox"></div>
                    <span class="task-icon">ğŸ“˜</span>
                    <span class="task-text">B5èª²æ–‡ç¬¬4å›</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="week4Progress" style="width: 0%"></div>
                </div>
                <p>æœ¬é€±å®Œæˆåº¦: <span id="week4Percent">0%</span></p>
            </div>
            <div class="celebration" id="celebration4">
                <h2>ğŸ‰ æ­å–œå®Œæˆç¬¬4é€±ä»»å‹™ï¼</h2>
                <p>Lesson 4 å­¸ç¿’å®Œæˆï¼å·²ç¶“éåŠäº†ï¼</p>
            </div>
        </div>

        <!-- Week 5 Content -->
        <div class="week-content" id="week5">
            <div class="class-info">
                <h3>ğŸ“… ç¬¬5é€±èª²å ‚å…§å®¹ (8/3)</h3>
                <p><strong>å‰15åˆ†é˜ï¼š</strong>ğŸ“Š èª²å ‚æ¸¬é©— <input type="number" id="test5" placeholder="åˆ†æ•¸" style="width:60px; margin-left:10px; padding:2px; border:1px solid #ccc; border-radius:4px;"></p>
                <p><strong>æ¥ä¸‹ä¾†30åˆ†é˜ï¼š</strong>ğŸ“– Lesson 5 èª²æ–‡é‡é»è¬›è§£</p>
                <p><strong>å‰©é¤˜æ™‚é–“ï¼š</strong>ğŸ” éŒ¯é¡Œè¬›è§£</p>
                <p><strong>æœ€å¾Œ30åˆ†é˜ï¼š</strong>âœ’ï¸ è«–èªªæ–‡ä½œæ–‡è¬›è§£</p>
            </div>
            <div class="tasks">
                <h3>âœ… ç¬¬5é€±å­¸ç¿’ä»»å‹™</h3>
                <div class="task-item" data-task-id="vocab_21_25" data-category="vocab">
                    <div class="checkbox"></div>
                    <span class="task-icon">ğŸ“š</span>
                    <span class="task-text">å–®å­—ç¬¬21ï½25å›è¨˜æ†¶</span>
                </div>
                <div class="task-item" data-task-id="translation_9_10" data-category="translation">
                    <div class="checkbox"></div>
                    <span class="task-icon">âœï¸</span>
                    <span class="task-text">å¥å‹ç¿»è­¯è¬›ç¾©ç¬¬9-10å›</span>
                </div>
                <div class="task-item" data-task-id="cloze_21_25" data-category="cloze">
                    <div class="checkbox"></div>
                    <span class="task-icon">ğŸ“</span>
                    <span class="task-text">å…‹æ¼å­—ç¬¬21ï½25å›</span>
                </div>
                <div class="task-item" data-task-id="reading_21_25" data-category="reading">
                    <div class="checkbox"></div>
                    <span class="task-icon">ğŸ“–</span>
                    <span class="task-text">é–±è®€æ¸¬é©—ç¬¬21ï½25å›</span>
                </div>
                <div class="task-item" data-task-id="mock_5" data-category="mock">
                    <div class="checkbox"></div>
                    <span class="task-icon">ğŸ“‹</span>
                    <span class="task-text">æ¨¡æ“¬æ¸¬é©—ï¼ˆç¬¬1å›ï¼‰</span>
                </div>
                <div class="task-item" data-task-id="essay_5" data-category="essay">
                    <div class="checkbox"></div>
                    <span class="task-icon">âœ’ï¸</span>
                    <span class="task-text">ä½œæ–‡ç¬¬5ç¯‡ï¼ˆè«–èªªæ–‡ï¼‰</span>
                </div>
                <div class="task-item" data-task-id="b5_5" data-category="b5">
                    <div class="checkbox"></div>
                    <span class="task-icon">ğŸ“˜</span>
                    <span class="task-text">B5èª²æ–‡ç¬¬5å›</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="week5Progress" style="width: 0%"></div>
                </div>
                <p>æœ¬é€±å®Œæˆåº¦: <span id="week5Percent">0%</span></p>
            </div>
            <div class="celebration" id="celebration5">
                <h2>ğŸ‰ æ­å–œå®Œæˆç¬¬5é€±ä»»å‹™ï¼</h2>
                <p>Lesson 5 å­¸ç¿’å®Œæˆï¼é€²å…¥è¤‡ç¿’éšæ®µï¼</p>
            </div>
        </div>

        <!-- Week 6 Content -->
        <div class="week-content" id="week6">
            <div class="class-info">
                <h3>ğŸ“… ç¬¬6é€±èª²å ‚å…§å®¹ (8/10)</h3>
                <p><strong>å‰15åˆ†é˜ï¼š</strong>ğŸ“Š èª²å ‚æ¸¬é©— <input type="number" id="test6" placeholder="åˆ†æ•¸" style="width:60px; margin-left:10px; padding:2px; border:1px solid #ccc; border-radius:4px;"></p>
                <p><strong>æ¥ä¸‹ä¾†30åˆ†é˜ï¼š</strong>ğŸ“– Review L1â€“2 çµ±æ•´è¤‡ç¿’</p>
                <p><strong>å‰©é¤˜æ™‚é–“ï¼š</strong>ğŸ” éŒ¯é¡Œè¬›è§£</p>
                <p><strong>æœ€å¾Œ30åˆ†é˜ï¼š</strong>âœ’ï¸ è«–èªªæ–‡ä½œæ–‡è¬›è§£</p>
            </div>
            <div class="tasks">
                <h3>âœ… ç¬¬6é€±å­¸ç¿’ä»»å‹™</h3>
                <div class="task-item" data-task-id="vocab_26_30" data-category="vocab">
                    <div class="checkbox"></div>
                    <span class="task-icon">ğŸ“š</span>
                    <span class="task-text">å–®å­—ç¬¬26ï½30å›è¨˜æ†¶</span>
                </div>
                <div class="task-item" data-task-id="translation_11_12" data-category="translation">
                    <div class="checkbox"></div>
                    <span class="task-icon">âœï¸</span>
                    <span class="task-text">å¥å‹ç¿»è­¯è¬›ç¾©ç¬¬11-12å›</span>
                </div>
                <div class="task-item" data-task-id="cloze_26_30" data-category="cloze">
                    <div class="checkbox"></div>
                    <span class="task-icon">ğŸ“</span>
                    <span class="task-text">å…‹æ¼å­—ç¬¬26ï½30å›</span>
                </div>
                <div class="task-item" data-task-id="reading_26_30" data-category="reading">
                    <div class="checkbox"></div>
                    <span class="task-icon">ğŸ“–</span>
                    <span class="task-text">é–±è®€æ¸¬é©—ç¬¬26ï½30å›</span>
                </div>
                <div class="task-item" data-task-id="essay_6" data-category="essay">
                    <div class="checkbox"></div>
                    <span class="task-icon">âœ’ï¸</span>
                    <span class="task-text">ä½œæ–‡ç¬¬6ç¯‡ï¼ˆæ›¸ä¿¡é¡Œï¼‰</span>
                </div>
                <div class="task-item" data-task-id="b5_review_1" data-category="b5">
                    <div class="checkbox"></div>
                    <span class="task-icon">ğŸ“˜</span>
                    <span class="task-text">B5èª²æ–‡è¤‡ç¿’ï¼ˆç¬¬1-2å›ï¼‰</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="week6Progress" style="width: 0%"></div>
                </div>
                <p>æœ¬é€±å®Œæˆåº¦: <span id="week6Percent">0%</span></p>
            </div>
            <div class="celebration" id="celebration6">
                <h2>ğŸ‰ æ­å–œå®Œæˆç¬¬6é€±ä»»å‹™ï¼</h2>
                <p>L1-2è¤‡ç¿’æ•´åˆå¾—å¾ˆå¥½ï¼å¿«è¦å®Œæˆèª²ç¨‹äº†ï¼</p>
            </div>
        </div>

        <!-- Week 7 Content -->
        <div class="week-content" id="week7">
            <div class="class-info">
                <h3>ğŸ“… ç¬¬7é€±èª²å ‚å…§å®¹ (8/17)</h3>
                <p><strong>å‰15åˆ†é˜ï¼š</strong>ğŸ“Š èª²å ‚æ¸¬é©— <input type="number" id="test7" placeholder="åˆ†æ•¸" style="width:60px; margin-left:10px; padding:2px; border:1px solid #ccc; border-radius:4px;"></p>
                <p><strong>æ¥ä¸‹ä¾†30åˆ†é˜ï¼š</strong>ğŸ“– Review L3â€“4 çµ±æ•´è¤‡ç¿’</p>
                <p><strong>å‰©é¤˜æ™‚é–“ï¼š</strong>ğŸ” éŒ¯é¡Œè¬›è§£</p>
                <p><strong>æœ€å¾Œ30åˆ†é˜ï¼š</strong>âœ’ï¸ åœ–è¡¨é¡Œä½œæ–‡è¬›è§£</p>
            </div>
            <div class="tasks">
                <h3>âœ… ç¬¬7é€±å­¸ç¿’ä»»å‹™</h3>
                <div class="task-item" data-task-id="vocab_31_35" data-category="vocab">
                    <div class="checkbox"></div>
                    <span class="task-icon">ğŸ“š</span>
                    <span class="task-text">å–®å­—ç¬¬31ï½35å›è¨˜æ†¶</span>
                </div>
                <div class="task-item" data-task-id="translation_13" data-category="translation">
                    <div class="checkbox"></div>
                    <span class="task-icon">âœï¸</span>
                    <span class="task-text">å¥å‹ç¿»è­¯è¬›ç¾©ç¬¬13å›</span>
                </div>
                <div class="task-item" data-task-id="cloze_31_35" data-category="cloze">
                    <div class="checkbox"></div>
                    <span class="task-icon">ğŸ“</span>
                    <span class="task-text">å…‹æ¼å­—ç¬¬31ï½35å›</span>
                </div>
                <div class="task-item" data-task-id="reading_31_35" data-category="reading">
                    <div class="checkbox"></div>
                    <span class="task-icon">ğŸ“–</span>
                    <span class="task-text">é–±è®€æ¸¬é©—ç¬¬31ï½35å›</span>
                </div>
                <div class="task-item" data-task-id="mock_7" data-category="mock">
                    <div class="checkbox"></div>
                    <span class="task-icon">ğŸ“‹</span>
                    <span class="task-text">æ¨¡æ“¬æ¸¬é©—ï¼ˆç¬¬2å›ï¼‰</span>
                </div>
                <div class="task-item" data-task-id="essay_7" data-category="essay">
                    <div class="checkbox"></div>
                    <span class="task-icon">âœ’ï¸</span>
                    <span class="task-text">ä½œæ–‡ç¬¬7ç¯‡ï¼ˆåœ–è¡¨é¡Œï¼‰</span>
                </div>
                <div class="task-item" data-task-id="b5_review_2" data-category="b5">
                    <div class="checkbox"></div>
                    <span class="task-icon">ğŸ“˜</span>
                    <span class="task-text">B5èª²æ–‡è¤‡ç¿’ï¼ˆç¬¬3-4å›ï¼‰</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="week7Progress" style="width: 0%"></div>
                </div>
                <p>æœ¬é€±å®Œæˆåº¦: <span id="week7Percent">0%</span></p>
            </div>
            <div class="celebration" id="celebration7">
                <h2>ğŸ‰ æ­å–œå®Œæˆç¬¬7é€±ä»»å‹™ï¼</h2>
                <p>L3-4è¤‡ç¿’æ•´åˆå®Œæˆï¼æœ€å¾Œè¡åˆºéšæ®µï¼</p>
            </div>
        </div>

        <!-- Week 8 Content -->
        <div class="week-content" id="week8">
            <div class="class-info">
                <h3>ğŸ“… ç¬¬8é€±èª²å ‚å…§å®¹ (8/24)</h3>
                <p><strong>å‰15åˆ†é˜ï¼š</strong>ğŸ“Š èª²å ‚æ¸¬é©— <input type="number" id="test8" placeholder="åˆ†æ•¸" style="width:60px; margin-left:10px; padding:2px; border:1px solid #ccc; border-radius:4px;"></p>
                <p><strong>æ¥ä¸‹ä¾†æ™‚é–“ï¼š</strong>ğŸ” éŒ¯é¡Œè¬›è§£ (å·²ç„¡æ–°èª²æ–‡é€²åº¦)</p>
                <p><strong>æœ€å¾Œ30åˆ†é˜ï¼š</strong>âœ’ï¸ ç¶œåˆä½œæ–‡æ¼”ç·´èˆ‡è¬›è§£</p>
            </div>
            <div class="tasks">
                <h3>âœ… ç¬¬8é€±å­¸ç¿’ä»»å‹™</h3>
                <div class="task-item" data-task-id="vocab_36_40" data-category="vocab">
                    <div class="checkbox"></div>
                    <span class="task-icon">ğŸ“š</span>
                    <span class="task-text">å–®å­—ç¬¬36ï½40å›è¨˜æ†¶</span>
                </div>
                <div class="task-item" data-task-id="translation_14" data-category="translation">
                    <div class="checkbox"></div>
                    <span class="task-icon">âœï¸</span>
                    <span class="task-text">å¥å‹ç¿»è­¯è¬›ç¾©ç¬¬14å›</span>
                </div>
                <div class="task-item" data-task-id="cloze_36_40" data-category="cloze">
                    <div class="checkbox"></div>
                    <span class="task-icon">ğŸ“</span>
                    <span class="task-text">å…‹æ¼å­—ç¬¬36ï½40å›</span>
                </div>
                <div class="task-item" data-task-id="reading_36_40" data-category="reading">
                    <div class="checkbox"></div>
                    <span class="task-icon">ğŸ“–</span>
                    <span class="task-text">é–±è®€æ¸¬é©—ç¬¬36ï½40å›</span>
                </div>
                <div class="task-item" data-task-id="final_mock" data-category="mock">
                    <div class="checkbox"></div>
                    <span class="task-icon">ğŸ“‹</span>
                    <span class="task-text">ç¸½è¤‡ç¿’æ¨¡æ“¬æ¸¬é©—</span>
                </div>
                <div class="task-item" data-task-id="essay_8" data-category="essay">
                    <div class="checkbox"></div>
                    <span class="task-icon">âœ’ï¸</span>
                    <span class="task-text">ä½œæ–‡ç¬¬8ç¯‡ï¼ˆç¶œåˆæ¼”ç·´ï¼‰</span>
                </div>
                <div class="task-item" data-task-id="b5_review_3" data-category="b5">
                    <div class="checkbox"></div>
                    <span class="task-icon">ğŸ“˜</span>
                    <span class="task-text">B5èª²æ–‡è¤‡ç¿’ï¼ˆç¬¬5å›ï¼‰</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" id="week8Progress" style="width: 0%"></div>
                </div>
                <p>æœ¬é€±å®Œæˆåº¦: <span id="week8Percent">0%</span></p>
            </div>
            <div class="celebration" id="celebration8">
                <h2>ğŸ‰ æ­å–œå®Œæˆæš‘æœŸèª²ç¨‹ï¼</h2>
                <p>ğŸŒŸ å…«é€±çš„åŠªåŠ›åœ“æ»¿å®Œæˆï¼ä½ å·²ç¶“ç‚ºå­¸æ¸¬åšå¥½å……åˆ†æº–å‚™ï¼</p>
            </div>
        </div>

        <div class="tips">
            <h3>ğŸ’¡ å­¸ç¿’å°è²¼å£«</h3>
            <p>ğŸ“Œ <strong>æ¯æ—¥è¤‡ç¿’ï¼š</strong>æ¯å¤©èŠ±15-20åˆ†é˜è¤‡ç¿’ç•¶é€±å–®å­—</p>
            <p>ğŸ“Œ <strong>éŒ¯é¡Œæ•´ç†ï¼š</strong>å°‡åšéŒ¯çš„é¡Œç›®æ•´ç†æˆéŒ¯é¡Œæœ¬ï¼Œå®šæœŸè¤‡ç¿’</p>
            <p>ğŸ“Œ <strong>ä½œæ–‡ç·´ç¿’ï¼š</strong>æ¯é€±è‡³å°‘å¯«ä¸€ç¯‡å®Œæ•´ä½œæ–‡ï¼Œæ³¨æ„æ™‚é–“æ§åˆ¶</p>
            <p>ğŸ“Œ <strong>é–±è®€æŠ€å·§ï¼š</strong>å…ˆçœ‹é¡Œç›®å†è®€æ–‡ç« ï¼Œæé«˜ç­”é¡Œæ•ˆç‡</p>
        </div>

        <div class="help-section">
            <h3>ğŸ“– ä½¿ç”¨èªªæ˜</h3>
            <p>ğŸ”˜ é»æ“Šä»»å‹™é …ç›®å¯æ¨™è¨˜å®Œæˆç‹€æ…‹</p>
            <p>ğŸ’¾ è¨˜å¾—å®šæœŸä¿å­˜é€²åº¦ï¼Œé¿å…è³‡æ–™éºå¤±</p>
            <p>ğŸ“Š çµ±è¨ˆè³‡æ–™æœƒå³æ™‚æ›´æ–°ï¼Œå¹«åŠ©ä½ æŒæ¡å­¸ç¿’é€²åº¦</p>
            <p>ğŸ–¨ï¸ å¯åˆ—å°é€²åº¦è¡¨ä½œç‚ºç´™æœ¬è¨˜éŒ„</p>
        </div>
    </div>

    <!-- æ¨¡æ…‹æ¡† -->
    <div id="helpModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2>ğŸ“š ä½¿ç”¨èªªæ˜</h2>
            <div style="text-align: left; margin: 20px 0;">
                <h3>ğŸ¯ åŠŸèƒ½ä»‹ç´¹</h3>
                <p>â€¢ <strong>é€²åº¦è¿½è¹¤ï¼š</strong>é»æ“Šä»»å‹™é …ç›®æ¨™è¨˜å®Œæˆç‹€æ…‹</p>
                <p>â€¢ <strong>çµ±è¨ˆåˆ†æï¼š</strong>å³æ™‚é¡¯ç¤ºå„ç§‘ç›®å®Œæˆé€²åº¦</p>
                <p>â€¢ <strong>é€±æ¬¡åˆ‡æ›ï¼š</strong>é»æ“Šé€±æ¬¡æ¨™ç±¤æŸ¥çœ‹ä¸åŒé€±çš„å…§å®¹</p>
                <p>â€¢ <strong>è³‡æ–™ä¿å­˜ï¼š</strong>é€²åº¦æœƒè‡ªå‹•ä¿å­˜åˆ°ç€è¦½å™¨</p>
                
                <h3>ğŸ’¡ å­¸ç¿’å»ºè­°</h3>
                <p>â€¢ æŒ‰ç…§èª²å ‚é€²åº¦é€æ­¥å®Œæˆä»»å‹™</p>
                <p>â€¢ æ¯å¤©è¤‡ç¿’ç•¶é€±é‡é»å…§å®¹</p>
                <p>â€¢ å®šæœŸæª¢è¦–çµ±è¨ˆæ•¸æ“šèª¿æ•´å­¸ç¿’ç­–ç•¥</p>
                <p>â€¢ å®Œæˆé€±ä»»å‹™å¾Œçµ¦è‡ªå·±å°çå‹µ</p>
            </div>
        </div>
    </div>

    <div id="resetModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeResetModal()">&times;</span>
            <h2>âš ï¸ ç¢ºèªé‡ç½®</h2>
            <p>é€™å°‡æ¸…é™¤æ‰€æœ‰é€²åº¦è¨˜éŒ„ï¼Œæ­¤æ“ä½œç„¡æ³•å¾©åŸã€‚</p>
            <p>ç¢ºå®šè¦é‡ç½®æ‰€æœ‰é€²åº¦å—ï¼Ÿ</p>
            <div style="margin-top: 20px;">
                <button type="button" class="btn btn-danger" onclick="resetProgress()">ç¢ºå®šé‡ç½®</button>
                <button type="button" class="btn btn-secondary" onclick="closeResetModal()" style="margin-left: 10px;">å–æ¶ˆ</button>
            </div>
        </div>
    </div>

    <div id="exportModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeExportModal()">&times;</span>
            <h2>ğŸ“„ åŒ¯å‡ºé€²åº¦</h2>
            <p>è«‹é¸æ“‡åŒ¯å‡ºæ ¼å¼ï¼š</p>
            <div style="margin: 20px 0;">
                <button type="button" class="btn btn-primary" onclick="exportAsHTML()" style="margin: 10px; padding: 15px 25px;">
                    ğŸŒ åŒ¯å‡ºç‚ºHTML<br>
                    <small>å®Œæ•´åŠŸèƒ½çš„ç¶²é æ–‡ä»¶</small>
                </button>
                <button type="button" class="btn btn-secondary" onclick="exportAsJSON()" style="margin: 10px; padding: 15px 25px;">
                    ğŸ“‹ åŒ¯å‡ºç‚ºJSON<br>
                    <small>ç´”æ•¸æ“šæ–‡ä»¶</small>
                </button>
            </div>
        </div>
    </div>

    <div id="taskManagerModal" class="modal">
        <div class="modal-content" style="max-width: 800px; max-height: 80vh; overflow-y: auto;">
            <span class="close" onclick="closeTaskManager()">&times;</span>
            <h2>âš™ï¸ ä»»å‹™ç®¡ç†</h2>
            
            <div style="margin: 20px 0; padding: 15px; background: #f0f8ff; border-radius: 8px;">
                <h3>â• æ–°å¢ä»»å‹™</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr 2fr auto; gap: 10px; align-items: center; margin: 10px 0;">
                    <select id="newTaskWeek" style="padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
                        <option value="1">ç¬¬1é€±</option>
                        <option value="2">ç¬¬2é€±</option>
                        <option value="3">ç¬¬3é€±</option>
                        <option value="4">ç¬¬4é€±</option>
                        <option value="5">ç¬¬5é€±</option>
                        <option value="6">ç¬¬6é€±</option>
                        <option value="7">ç¬¬7é€±</option>
                        <option value="8">ç¬¬8é€±</option>
                    </select>
                    <select id="newTaskCategory" style="padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
                        <option value="vocab">ğŸ“š å–®å­—</option>
                        <option value="translation">âœï¸ ç¿»è­¯</option>
                        <option value="cloze">ğŸ“ å…‹æ¼å­—</option>
                        <option value="reading">ğŸ“– é–±è®€</option>
                        <option value="essay">âœ’ï¸ ä½œæ–‡</option>
                        <option value="b5">ğŸ“˜ B5èª²æ–‡</option>
                        <option value="mock">ğŸ“‹ æ¨¡æ“¬è€ƒ</option>
                        <option value="other">ğŸ”– å…¶ä»–</option>
                    </select>
                    <input type="text" id="newTaskText" placeholder="ä»»å‹™æè¿°" style="padding: 8px; border: 1px solid #ccc; border-radius: 4px;">
                    <button type="button" class="btn btn-primary" onclick="addNewTask()" style="padding: 8px 15px;">æ–°å¢</button>
                </div>
            </div>

            <div style="margin: 20px 0;">
                <h3>ğŸ“ ç¾æœ‰ä»»å‹™åˆ—è¡¨</h3>
                <div style="margin: 10px 0;">
                    <label>ç¯©é¸é€±æ¬¡: </label>
                    <select id="filterWeek" onchange="filterTasks()" style="padding: 5px; margin-left: 10px;">
                        <option value="all">å…¨éƒ¨é€±æ¬¡</option>
                        <option value="1">ç¬¬1é€±</option>
                        <option value="2">ç¬¬2é€±</option>
                        <option value="3">ç¬¬3é€±</option>
                        <option value="4">ç¬¬4é€±</option>
                        <option value="5">ç¬¬5é€±</option>
                        <option value="6">ç¬¬6é€±</option>
                        <option value="7">ç¬¬7é€±</option>
                        <option value="8">ç¬¬8é€±</option>
                    </select>
                </div>
                <div id="taskList" style="max-height: 400px; overflow-y: auto; border: 1px solid #ddd; border-radius: 8px; padding: 10px;">
                    <!-- ä»»å‹™åˆ—è¡¨å°‡åœ¨é€™è£¡å‹•æ…‹ç”Ÿæˆ -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // ä»»å‹™æ•¸æ“šçµæ§‹
        const taskData = {
            vocab: ['vocab_1_5', 'vocab_6_10', 'vocab_11_15', 'vocab_16_20', 'vocab_21_25', 'vocab_26_30', 'vocab_31_35', 'vocab_36_40'],
            translation: ['translation_1_2', 'translation_3_4', 'translation_5_6', 'translation_7_8', 'translation_9_10', 'translation_11_12', 'translation_13', 'translation_14'],
            cloze: ['cloze_1_5', 'cloze_6_10', 'cloze_11_15', 'cloze_16_20', 'cloze_21_25', 'cloze_26_30', 'cloze_31_35', 'cloze_36_40'],
            reading: ['reading_1_5', 'reading_6_10', 'reading_11_15', 'reading_16_20', 'reading_21_25', 'reading_26_30', 'reading_31_35', 'reading_36_40'],
            essay: ['essay_1', 'essay_2', 'essay_3', 'essay_4', 'essay_5', 'essay_6', 'essay_7', 'essay_8'],
            mock: ['mock_5', 'mock_7', 'final_mock'],
            b5: ['b5_1', 'b5_2', 'b5_3', 'b5_4', 'b5_5', 'b5_review_1', 'b5_review_2', 'b5_review_3']
        };

        // é€±æ¬¡ä»»å‹™é…ç½®
        const weekTasks = {
            1: ['vocab_1_5', 'translation_1_2', 'cloze_1_5', 'reading_1_5', 'essay_1', 'b5_1'],
            2: ['vocab_6_10', 'translation_3_4', 'cloze_6_10', 'reading_6_10', 'essay_2', 'b5_2'],
            3: ['vocab_11_15', 'translation_5_6', 'cloze_11_15', 'reading_11_15', 'essay_3', 'b5_3'],
            4: ['vocab_16_20', 'translation_7_8', 'cloze_16_20', 'reading_16_20', 'essay_4', 'b5_4'],
            5: ['vocab_21_25', 'translation_9_10', 'cloze_21_25', 'reading_21_25', 'mock_5', 'essay_5', 'b5_5'],
            6: ['vocab_26_30', 'translation_11_12', 'cloze_26_30', 'reading_26_30', 'essay_6', 'b5_review_1'],
            7: ['vocab_31_35', 'translation_13', 'cloze_31_35', 'reading_31_35', 'mock_7', 'essay_7', 'b5_review_2'],
            8: ['vocab_36_40', 'translation_14', 'cloze_36_40', 'reading_36_40', 'final_mock', 'essay_8', 'b5_review_3']
        };

        // å…¨å±€è®Šé‡
        let progress = {};
        let testScores = {};
        let customTasks = {};
        let isInitialized = false;

        // åœ–æ¨™æ˜ å°„
        const categoryIcons = {
            vocab: 'ğŸ“š',
            translation: 'âœï¸',
            cloze: 'ğŸ“',
            reading: 'ğŸ“–',
            essay: 'âœ’ï¸',
            b5: 'ğŸ“˜',
            mock: 'ğŸ“‹',
            other: 'ğŸ”–'
        };

        // åˆå§‹åŒ–
        function init() {
            if (isInitialized) {
                console.log('Application already initialized');
                return;
            }
            
            console.log('Initializing application...');
            
            try {
                loadProgress();
                loadTestScores();
                loadCustomTasks();
                setupEventListeners();
                updateAllProgress();
                updatePrintDate();
                setupTestScoreListeners();
                
                isInitialized = true;
                console.log('Application initialized successfully');
            } catch (error) {
                console.error('Error during initialization:', error);
            }
        }

        // è¨­ç½®äº‹ä»¶ç›£è½å™¨
        function setupEventListeners() {
            console.log('Setting up event listeners...');
            
            // è¨­ç½®ä¸»è¦æŒ‰éˆ•äº‹ä»¶
            const saveBtn = document.getElementById('saveProgressBtn');
            const exportBtn = document.getElementById('exportOptionsBtn');
            const resetBtn = document.getElementById('resetBtn');
            const helpBtn = document.getElementById('helpBtn');
            const taskManagerBtn = document.getElementById('taskManagerBtn');
            
            if (saveBtn) saveBtn.addEventListener('click', saveProgress);
            if (exportBtn) exportBtn.addEventListener('click', showExportOptions);
            if (resetBtn) resetBtn.addEventListener('click', confirmReset);
            if (helpBtn) helpBtn.addEventListener('click', showHelp);
            if (taskManagerBtn) taskManagerBtn.addEventListener('click', showTaskManager);

            // è¨­ç½®é€±æ¬¡æ¨™ç±¤äº‹ä»¶
            setupWeekTabListeners();
            
            // è¨­ç½®ä»»å‹™é …ç›®äº‹ä»¶
            setupTaskEventListeners();
        }

        // è¨­ç½®é€±æ¬¡æ¨™ç±¤äº‹ä»¶ç›£è½å™¨
        function setupWeekTabListeners() {
            document.querySelectorAll('.week-tab').forEach((tab, index) => {
                const week = parseInt(tab.getAttribute('data-week')) || (index + 1);
                
                tab.addEventListener('click', function() {
                    showWeek(week);
                });
            });
        }

        // è¨­ç½®ä»»å‹™äº‹ä»¶ç›£è½å™¨
        function setupTaskEventListeners() {
            document.querySelectorAll('.task-item').forEach(item => {
                const taskId = item.getAttribute('data-task-id');
                const category = item.getAttribute('data-category');
                
                if (taskId && category) {
                    item.addEventListener('click', function(e) {
                        if (e.target.classList.contains('delete-btn')) {
                            e.stopPropagation();
                            return;
                        }
                        toggleTask(taskId, category);
                    });
                }
            });
        }

        // è¼‰å…¥é€²åº¦
        function loadProgress() {
            const saved = JSON.parse(localStorage.getItem('englishProgress') || '{}');
            progress = saved;
            
            Object.keys(progress).forEach(taskId => {
                if (progress[taskId]) {
                    const elements = document.querySelectorAll(`[data-task-id="${taskId}"]`);
                    elements.forEach(element => {
                        if (element) {
                            element.classList.add('completed');
                        }
                    });
                }
            });
        }

        // è¼‰å…¥æ¸¬é©—åˆ†æ•¸
        function loadTestScores() {
            const saved = JSON.parse(localStorage.getItem('testScores') || '{}');
            testScores = saved;
            
            for (let i = 1; i <= 8; i++) {
                const input = document.getElementById(`test${i}`);
                if (input && testScores[`test${i}`]) {
                    input.value = testScores[`test${i}`];
                }
            }
        }

        // è¼‰å…¥è‡ªå®šç¾©ä»»å‹™
        function loadCustomTasks() {
            const saved = JSON.parse(localStorage.getItem('customTasks') || '{}');
            customTasks = saved;
            renderCustomTasks();
        }

        // è¨­ç½®æ¸¬é©—åˆ†æ•¸ç›£è½å™¨
        function setupTestScoreListeners() {
            for (let i = 1; i <= 8; i++) {
                const input = document.getElementById(`test${i}`);
                if (input) {
                    input.addEventListener('input', function() {
                        testScores[`test${i}`] = this.value;
                        localStorage.setItem('testScores', JSON.stringify(testScores));
                    });
                }
            }
        }

        // åˆ‡æ›ä»»å‹™ç‹€æ…‹
        function toggleTask(taskId, category) {
            console.log('toggleTask called:', taskId, category);
            
            progress[taskId] = !progress[taskId];
            
            const elements = document.querySelectorAll(`[data-task-id="${taskId}"]`);
            elements.forEach(element => {
                if (progress[taskId]) {
                    element.classList.add('completed');
                } else {
                    element.classList.remove('completed');
                }
            });

            if (progress[taskId]) {
                showCelebration(taskId);
            }
            
            updateAllProgress();
            localStorage.setItem('englishProgress', JSON.stringify(progress));
        }

        // é¡¯ç¤ºæ…¶ç¥å‹•ç•«
        function showCelebration(taskId) {
            for (let week = 1; week <= 8; week++) {
                const weekTaskList = weekTasks[week] || [];
                const completed = weekTaskList.every(task => progress[task]);
                
                if (completed && weekTaskList.includes(taskId)) {
                    const celebration = document.getElementById(`celebration${week}`);
                    if (celebration) {
                        celebration.classList.add('show');
                        setTimeout(() => {
                            celebration.classList.remove('show');
                        }, 3000);
                    }
                    break;
                }
            }
        }

        // æ›´æ–°æ‰€æœ‰é€²åº¦
        function updateAllProgress() {
            updateCategoryProgress();
            updateWeekProgress();
            updateTotalProgress();
        }

        // æ›´æ–°åˆ†é¡é€²åº¦
        function updateCategoryProgress() {
            Object.keys(taskData).forEach(category => {
                const tasks = taskData[category] || [];
                const completed = tasks.filter(task => progress[task]).length;
                const percentage = tasks.length > 0 ? Math.round((completed / tasks.length) * 100) : 0;
                
                const element = document.getElementById(`${category}Progress`);
                if (element) {
                    element.textContent = `${percentage}%`;
                }
            });
        }

        // æ›´æ–°é€±é€²åº¦
        function updateWeekProgress() {
            for (let week = 1; week <= 8; week++) {
                const tasks = weekTasks[week] || [];
                const completed = tasks.filter(task => progress[task]).length;
                const percentage = tasks.length > 0 ? Math.round((completed / tasks.length) * 100) : 0;
                
                const progressBar = document.getElementById(`week${week}Progress`);
                const progressText = document.getElementById(`week${week}Percent`);
                
                if (progressBar) progressBar.style.width = `${percentage}%`;
                if (progressText) progressText.textContent = `${percentage}%`;
            }
        }

        // æ›´æ–°ç¸½é€²åº¦
        function updateTotalProgress() {
            const allTasks = Object.values(weekTasks).flat();
            const completed = allTasks.filter(task => progress[task]).length;
            const percentage = allTasks.length > 0 ? Math.round((completed / allTasks.length) * 100) : 0;
            
            const totalElement = document.getElementById('totalProgress');
            const printElement = document.getElementById('print-total-progress');
            
            if (totalElement) totalElement.textContent = `${percentage}%`;
            if (printElement) printElement.textContent = `${percentage}%`;
        }

        // åˆ‡æ›é€±æ¬¡é¡¯ç¤º
        function showWeek(week) {
            document.querySelectorAll('.week-content').forEach(content => {
                content.classList.remove('active');
            });
            
            document.querySelectorAll('.week-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            const weekContent = document.getElementById(`week${week}`);
            if (weekContent) {
                weekContent.classList.add('active');
            }
            
            const activeTab = document.querySelector(`[data-week="${week}"]`);
            if (activeTab) {
                activeTab.classList.add('active');
            }
        }

        // ä¿å­˜é€²åº¦
        function saveProgress() {
            localStorage.setItem('englishProgress', JSON.stringify(progress));
            alert('âœ… é€²åº¦å·²ä¿å­˜ï¼');
        }

        // æ¸²æŸ“è‡ªå®šç¾©ä»»å‹™
        function renderCustomTasks() {
            document.querySelectorAll('.custom-task').forEach(el => el.remove());
            
            Object.keys(customTasks).forEach(taskId => {
                const task = customTasks[taskId];
                const weekContainer = document.querySelector(`#week${task.week} .tasks`);
                if (weekContainer) {
                    const taskElement = createTaskElement(taskId, task);
                    const progressBar = weekContainer.querySelector('.progress-bar');
                    weekContainer.insertBefore(taskElement, progressBar);
                }
            });
        }

        // å‰µå»ºä»»å‹™å…ƒç´ 
        function createTaskElement(taskId, task) {
            const div = document.createElement('div');
            div.className = 'task-item custom-task';
            div.setAttribute('data-task-id', taskId);
            div.setAttribute('data-category', task.category);
            
            if (progress[taskId]) {
                div.classList.add('completed');
            }
            
            div.innerHTML = `
                <div class="checkbox"></div>
                <span class="task-icon">${categoryIcons[task.category] || 'ğŸ”–'}</span>
                <span class="task-text">${task.text}</span>
                <button type="button" class="btn btn-danger delete-btn" data-task-id="${taskId}" style="margin-left: auto; padding: 2px 8px; font-size: 12px;">åˆªé™¤</button>
            `;
            
            div.addEventListener('click', function(e) {
                if (e.target.classList.contains('delete-btn')) {
                    e.stopPropagation();
                    deleteTask(e.target.getAttribute('data-task-id'));
                    return;
                }
                toggleTask(taskId, task.category);
            });
            
            return div;
        }

        // é¡¯ç¤ºä»»å‹™ç®¡ç†å™¨
        function showTaskManager() {
            const modal = document.getElementById('taskManagerModal');
            if (modal) {
                modal.style.display = 'block';
                loadTaskList();
            } else {
                console.error('Task manager modal not found');
            }
        }

        // é—œé–‰ä»»å‹™ç®¡ç†å™¨
        function closeTaskManager() {
            const modal = document.getElementById('taskManagerModal');
            if (modal) {
                modal.style.display = 'none';
            }
        }

        // å…¶ä»–å¿…è¦å‡½æ•¸
        function confirmReset() {
            const modal = document.getElementById('resetModal');
            if (modal) modal.style.display = 'block';
        }

        function showHelp() {
            const modal = document.getElementById('helpModal');
            if (modal) modal.style.display = 'block';
        }

        function showExportOptions() {
            const modal = document.getElementById('exportModal');
            if (modal) modal.style.display = 'block';
        }

        function closeModal() {
            const modal = document.getElementById('helpModal');
            if (modal) modal.style.display = 'none';
        }

        function closeResetModal() {
            const modal = document.getElementById('resetModal');
            if (modal) modal.style.display = 'none';
        }

        function closeExportModal() {
            const modal = document.getElementById('exportModal');
            if (modal) modal.style.display = 'none';
        }

        function updatePrintDate() {
            const element = document.getElementById('print-date');
            if (element) {
                element.textContent = new Date().toLocaleDateString('zh-TW');
            }
        }

        // æ–°å¢ã€åˆªé™¤ã€ç¯©é¸ä»»å‹™çš„å‡½æ•¸
        function addNewTask() {
            const week = document.getElementById('newTaskWeek').value;
            const category = document.getElementById('newTaskCategory').value;
            const text = document.getElementById('newTaskText').value.trim();
            
            if (!text) {
                alert('è«‹è¼¸å…¥ä»»å‹™æè¿°ï¼');
                return;
            }
            
            const taskId = `custom_${category}_${Date.now()}`;
            
            customTasks[taskId] = {
                week: parseInt(week),
                category: category,
                text: text
            };
            
            if (!weekTasks[week]) weekTasks[week] = [];
            weekTasks[week].push(taskId);
            
            if (!taskData[category]) taskData[category] = [];
            taskData[category].push(taskId);
            
            localStorage.setItem('customTasks', JSON.stringify(customTasks));
            renderCustomTasks();
            updateAllProgress();
            loadTaskList();
            
            document.getElementById('newTaskText').value = '';
            alert('âœ… ä»»å‹™æ–°å¢æˆåŠŸï¼');
        }

        function deleteTask(taskId) {
            if (!confirm('ç¢ºå®šè¦åˆªé™¤é€™å€‹ä»»å‹™å—ï¼Ÿ')) return;
            
            const task = customTasks[taskId];
            if (task) {
                delete customTasks[taskId];
                delete progress[taskId];
                
                const weekIndex = weekTasks[task.week]?.indexOf(taskId);
                if (weekIndex > -1) {
                    weekTasks[task.week].splice(weekIndex, 1);
                }
                
                const categoryIndex = taskData[task.category]?.indexOf(taskId);
                if (categoryIndex > -1) {
                    taskData[task.category].splice(categoryIndex, 1);
                }
                
                localStorage.setItem('customTasks', JSON.stringify(customTasks));
                localStorage.setItem('englishProgress', JSON.stringify(progress));
                renderCustomTasks();
                updateAllProgress();
                loadTaskList();
                
                alert('ğŸ—‘ï¸ ä»»å‹™å·²åˆªé™¤ï¼');
            }
        }

        function loadTaskList() {
            // ç°¡åŒ–ç‰ˆçš„ä»»å‹™åˆ—è¡¨è¼‰å…¥
            console.log('Loading task list...');
        }

        function filterTasks() {
            loadTaskList();
        }

        function resetProgress() {
            progress = {};
            testScores = {};
            customTasks = {};
            localStorage.removeItem('englishProgress');
            localStorage.removeItem('testScores');
            localStorage.removeItem('customTasks');
            
            document.querySelectorAll('.task-item').forEach(item => {
                item.classList.remove('completed');
            });
            
            for (let i = 1; i <= 8; i++) {
                const input = document.getElementById(`test${i}`);
                if (input) input.value = '';
            }
            
            renderCustomTasks();
            updateAllProgress();
            closeResetModal();
            alert('ğŸ”„ é€²åº¦å·²é‡ç½®ï¼');
        }

        function exportAsHTML() {
            const data = {
                progress: progress,
                testScores: testScores,
                customTasks: customTasks,
                exportDate: new Date().toLocaleDateString('zh-TW'),
                totalProgress: document.getElementById('totalProgress').textContent
            };
            
            const htmlContent = generateCompleteHTML(data);
            const blob = new Blob([htmlContent], { 
                type: 'text/html;charset=utf-8' 
            });
            
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `æš‘æœŸè‹±æ–‡é€²åº¦è¡¨_${new Date().toISOString().split('T')[0]}.html`;
            a.click();
            
            URL.revokeObjectURL(url);
            closeExportModal();
            alert('ğŸ“„ é€²åº¦è¡¨å·²åŒ¯å‡ºç‚ºHTMLæ–‡ä»¶ï¼');
        }

        function exportAsJSON() {
            const data = {
                progress: progress,
                testScores: testScores,
                customTasks: customTasks,
                exportDate: new Date().toLocaleDateString('zh-TW'),
                totalProgress: document.getElementById('totalProgress').textContent
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json;charset=utf-8' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = `æš‘æœŸè‹±æ–‡é€²åº¦_${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            
            URL.revokeObjectURL(url);
            closeExportModal();
            alert('ğŸ“„ JSONæ•¸æ“šå·²åŒ¯å‡ºï¼');
        }

        function generateCompleteHTML(data) {
            const currentHTML = document.documentElement.outerHTML;
            return `<!DOCTYPE html>\n${currentHTML}`;
        }

        // é»æ“Šæ¨¡æ…‹æ¡†å¤–éƒ¨é—œé–‰
        window.onclick = function(event) {
            const modals = ['helpModal', 'resetModal', 'taskManagerModal', 'exportModal'];
            modals.forEach(modalId => {
                const modal = document.getElementById(modalId);
                if (modal && event.target === modal) {
                    modal.style.display = 'none';
                }
            });
        };

        // åˆå§‹åŒ–æ‡‰ç”¨
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', init);
        } else {
            init();
        }
    </script>
</body>
</html>